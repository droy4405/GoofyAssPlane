0000              1   ;--------------------------------------------------------
0000              2   ; File Created by C51
0000              3   ; Version 1.0.0 #1170 (Feb 16 2022) (MSVC)
0000              4   ; This file was generated Wed May 15 16:05:18 2024
0000              5   ;--------------------------------------------------------
                  5   $name EFM8_JDY41_Throttle
                  6   $optc51 --model-small
0000              8            R_DSEG    segment data
0000              9            R_CSEG    segment code
0000             10            R_BSEG    segment bit
0000             11            R_XSEG    segment xdata
0000             12            R_PSEG    segment xdata
0000             13            R_ISEG    segment idata
0000             14            R_OSEG    segment data overlay
0000             15            BIT_BANK  segment data overlay
0000             16            R_HOME    segment code
0000             17            R_GSINIT  segment code
0000             18            R_IXSEG   segment xdata
0000             19            R_CONST   segment code
0000             20            R_XINIT   segment code
0000             21            R_DINIT   segment code
0000             22   
0000             23   ;--------------------------------------------------------
0000             24   ; Public variables in this module
0000             25   ;--------------------------------------------------------
0000             26            public _main
0000             27            public _Timer5_ISR
0000             28            public _Timer4_ISR
0000             29            public _waitms
0000             30            public _Timer3us
0000             31            public __c51_external_startup
0000             32            public _count20ms
0000             33            public _pwm_state1
0000             34            public _pwm_state
0000             35            public _pwm_motor_reload
0000             36            public _pwm_reload
0000             37   ;--------------------------------------------------------
0000             38   ; Special Function Registers
0000             39   ;--------------------------------------------------------
0000             40   _ACC            DATA 0xe0
0000             41   _ADC0ASAH       DATA 0xb6
0000             42   _ADC0ASAL       DATA 0xb5
0000             43   _ADC0ASCF       DATA 0xa1
0000             44   _ADC0ASCT       DATA 0xc7
0000             45   _ADC0CF0        DATA 0xbc
0000             46   _ADC0CF1        DATA 0xb9
0000             47   _ADC0CF2        DATA 0xdf
0000             48   _ADC0CN0        DATA 0xe8
0000             49   _ADC0CN1        DATA 0xb2
0000             50   _ADC0CN2        DATA 0xb3
0000             51   _ADC0GTH        DATA 0xc4
0000             52   _ADC0GTL        DATA 0xc3
0000             53   _ADC0H          DATA 0xbe
0000             54   _ADC0L          DATA 0xbd
0000             55   _ADC0LTH        DATA 0xc6
0000             56   _ADC0LTL        DATA 0xc5
0000             57   _ADC0MX         DATA 0xbb
0000             58   _B              DATA 0xf0
0000             59   _CKCON0         DATA 0x8e
0000             60   _CKCON1         DATA 0xa6
0000             61   _CLEN0          DATA 0xc6
0000             62   _CLIE0          DATA 0xc7
0000             63   _CLIF0          DATA 0xe8
0000             64   _CLKSEL         DATA 0xa9
0000             65   _CLOUT0         DATA 0xd1
0000             66   _CLU0CF         DATA 0xb1
0000             67   _CLU0FN         DATA 0xaf
0000             68   _CLU0MX         DATA 0x84
0000             69   _CLU1CF         DATA 0xb3
0000             70   _CLU1FN         DATA 0xb2
0000             71   _CLU1MX         DATA 0x85
0000             72   _CLU2CF         DATA 0xb6
0000             73   _CLU2FN         DATA 0xb5
0000             74   _CLU2MX         DATA 0x91
0000             75   _CLU3CF         DATA 0xbf
0000             76   _CLU3FN         DATA 0xbe
0000             77   _CLU3MX         DATA 0xae
0000             78   _CMP0CN0        DATA 0x9b
0000             79   _CMP0CN1        DATA 0x99
0000             80   _CMP0MD         DATA 0x9d
0000             81   _CMP0MX         DATA 0x9f
0000             82   _CMP1CN0        DATA 0xbf
0000             83   _CMP1CN1        DATA 0xac
0000             84   _CMP1MD         DATA 0xab
0000             85   _CMP1MX         DATA 0xaa
0000             86   _CRC0CN0        DATA 0xce
0000             87   _CRC0CN1        DATA 0x86
0000             88   _CRC0CNT        DATA 0xd3
0000             89   _CRC0DAT        DATA 0xcb
0000             90   _CRC0FLIP       DATA 0xcf
0000             91   _CRC0IN         DATA 0xca
0000             92   _CRC0ST         DATA 0xd2
0000             93   _DAC0CF0        DATA 0x91
0000             94   _DAC0CF1        DATA 0x92
0000             95   _DAC0H          DATA 0x85
0000             96   _DAC0L          DATA 0x84
0000             97   _DAC1CF0        DATA 0x93
0000             98   _DAC1CF1        DATA 0x94
0000             99   _DAC1H          DATA 0x8a
0000            100   _DAC1L          DATA 0x89
0000            101   _DAC2CF0        DATA 0x95
0000            102   _DAC2CF1        DATA 0x96
0000            103   _DAC2H          DATA 0x8c
0000            104   _DAC2L          DATA 0x8b
0000            105   _DAC3CF0        DATA 0x9a
0000            106   _DAC3CF1        DATA 0x9c
0000            107   _DAC3H          DATA 0x8e
0000            108   _DAC3L          DATA 0x8d
0000            109   _DACGCF0        DATA 0x88
0000            110   _DACGCF1        DATA 0x98
0000            111   _DACGCF2        DATA 0xa2
0000            112   _DERIVID        DATA 0xad
0000            113   _DEVICEID       DATA 0xb5
0000            114   _DPH            DATA 0x83
0000            115   _DPL            DATA 0x82
0000            116   _EIE1           DATA 0xe6
0000            117   _EIE2           DATA 0xf3
0000            118   _EIP1           DATA 0xbb
0000            119   _EIP1H          DATA 0xee
0000            120   _EIP2           DATA 0xed
0000            121   _EIP2H          DATA 0xf6
0000            122   _EMI0CN         DATA 0xe7
0000            123   _FLKEY          DATA 0xb7
0000            124   _HFO0CAL        DATA 0xc7
0000            125   _HFO1CAL        DATA 0xd6
0000            126   _HFOCN          DATA 0xef
0000            127   _I2C0ADM        DATA 0xff
0000            128   _I2C0CN0        DATA 0xba
0000            129   _I2C0DIN        DATA 0xbc
0000            130   _I2C0DOUT       DATA 0xbb
0000            131   _I2C0FCN0       DATA 0xad
0000            132   _I2C0FCN1       DATA 0xab
0000            133   _I2C0FCT        DATA 0xf5
0000            134   _I2C0SLAD       DATA 0xbd
0000            135   _I2C0STAT       DATA 0xb9
0000            136   _IE             DATA 0xa8
0000            137   _IP             DATA 0xb8
0000            138   _IPH            DATA 0xf2
0000            139   _IT01CF         DATA 0xe4
0000            140   _LFO0CN         DATA 0xb1
0000            141   _P0             DATA 0x80
0000            142   _P0MASK         DATA 0xfe
0000            143   _P0MAT          DATA 0xfd
0000            144   _P0MDIN         DATA 0xf1
0000            145   _P0MDOUT        DATA 0xa4
0000            146   _P0SKIP         DATA 0xd4
0000            147   _P1             DATA 0x90
0000            148   _P1MASK         DATA 0xee
0000            149   _P1MAT          DATA 0xed
0000            150   _P1MDIN         DATA 0xf2
0000            151   _P1MDOUT        DATA 0xa5
0000            152   _P1SKIP         DATA 0xd5
0000            153   _P2             DATA 0xa0
0000            154   _P2MASK         DATA 0xfc
0000            155   _P2MAT          DATA 0xfb
0000            156   _P2MDIN         DATA 0xf3
0000            157   _P2MDOUT        DATA 0xa6
0000            158   _P2SKIP         DATA 0xcc
0000            159   _P3             DATA 0xb0
0000            160   _P3MDIN         DATA 0xf4
0000            161   _P3MDOUT        DATA 0x9c
0000            162   _PCA0CENT       DATA 0x9e
0000            163   _PCA0CLR        DATA 0x9c
0000            164   _PCA0CN0        DATA 0xd8
0000            165   _PCA0CPH0       DATA 0xfc
0000            166   _PCA0CPH1       DATA 0xea
0000            167   _PCA0CPH2       DATA 0xec
0000            168   _PCA0CPH3       DATA 0xf5
0000            169   _PCA0CPH4       DATA 0x85
0000            170   _PCA0CPH5       DATA 0xde
0000            171   _PCA0CPL0       DATA 0xfb
0000            172   _PCA0CPL1       DATA 0xe9
0000            173   _PCA0CPL2       DATA 0xeb
0000            174   _PCA0CPL3       DATA 0xf4
0000            175   _PCA0CPL4       DATA 0x84
0000            176   _PCA0CPL5       DATA 0xdd
0000            177   _PCA0CPM0       DATA 0xda
0000            178   _PCA0CPM1       DATA 0xdb
0000            179   _PCA0CPM2       DATA 0xdc
0000            180   _PCA0CPM3       DATA 0xae
0000            181   _PCA0CPM4       DATA 0xaf
0000            182   _PCA0CPM5       DATA 0xcc
0000            183   _PCA0H          DATA 0xfa
0000            184   _PCA0L          DATA 0xf9
0000            185   _PCA0MD         DATA 0xd9
0000            186   _PCA0POL        DATA 0x96
0000            187   _PCA0PWM        DATA 0xf7
0000            188   _PCON0          DATA 0x87
0000            189   _PCON1          DATA 0xcd
0000            190   _PFE0CN         DATA 0xc1
0000            191   _PRTDRV         DATA 0xf6
0000            192   _PSCTL          DATA 0x8f
0000            193   _PSTAT0         DATA 0xaa
0000            194   _PSW            DATA 0xd0
0000            195   _REF0CN         DATA 0xd1
0000            196   _REG0CN         DATA 0xc9
0000            197   _REVID          DATA 0xb6
0000            198   _RSTSRC         DATA 0xef
0000            199   _SBCON1         DATA 0x94
0000            200   _SBRLH1         DATA 0x96
0000            201   _SBRLL1         DATA 0x95
0000            202   _SBUF           DATA 0x99
0000            203   _SBUF0          DATA 0x99
0000            204   _SBUF1          DATA 0x92
0000            205   _SCON           DATA 0x98
0000            206   _SCON0          DATA 0x98
0000            207   _SCON1          DATA 0xc8
0000            208   _SFRPAGE        DATA 0xa7
0000            209   _SFRPGCN        DATA 0xbc
0000            210   _SFRSTACK       DATA 0xd7
0000            211   _SMB0ADM        DATA 0xd6
0000            212   _SMB0ADR        DATA 0xd7
0000            213   _SMB0CF         DATA 0xc1
0000            214   _SMB0CN0        DATA 0xc0
0000            215   _SMB0DAT        DATA 0xc2
0000            216   _SMB0FCN0       DATA 0xc3
0000            217   _SMB0FCN1       DATA 0xc4
0000            218   _SMB0FCT        DATA 0xef
0000            219   _SMB0RXLN       DATA 0xc5
0000            220   _SMB0TC         DATA 0xac
0000            221   _SMOD1          DATA 0x93
0000            222   _SP             DATA 0x81
0000            223   _SPI0CFG        DATA 0xa1
0000            224   _SPI0CKR        DATA 0xa2
0000            225   _SPI0CN0        DATA 0xf8
0000            226   _SPI0DAT        DATA 0xa3
0000            227   _SPI0FCN0       DATA 0x9a
0000            228   _SPI0FCN1       DATA 0x9b
0000            229   _SPI0FCT        DATA 0xf7
0000            230   _SPI0PCF        DATA 0xdf
0000            231   _TCON           DATA 0x88
0000            232   _TH0            DATA 0x8c
0000            233   _TH1            DATA 0x8d
0000            234   _TL0            DATA 0x8a
0000            235   _TL1            DATA 0x8b
0000            236   _TMOD           DATA 0x89
0000            237   _TMR2CN0        DATA 0xc8
0000            238   _TMR2CN1        DATA 0xfd
0000            239   _TMR2H          DATA 0xcf
0000            240   _TMR2L          DATA 0xce
0000            241   _TMR2RLH        DATA 0xcb
0000            242   _TMR2RLL        DATA 0xca
0000            243   _TMR3CN0        DATA 0x91
0000            244   _TMR3CN1        DATA 0xfe
0000            245   _TMR3H          DATA 0x95
0000            246   _TMR3L          DATA 0x94
0000            247   _TMR3RLH        DATA 0x93
0000            248   _TMR3RLL        DATA 0x92
0000            249   _TMR4CN0        DATA 0x98
0000            250   _TMR4CN1        DATA 0xff
0000            251   _TMR4H          DATA 0xa5
0000            252   _TMR4L          DATA 0xa4
0000            253   _TMR4RLH        DATA 0xa3
0000            254   _TMR4RLL        DATA 0xa2
0000            255   _TMR5CN0        DATA 0xc0
0000            256   _TMR5CN1        DATA 0xf1
0000            257   _TMR5H          DATA 0xd5
0000            258   _TMR5L          DATA 0xd4
0000            259   _TMR5RLH        DATA 0xd3
0000            260   _TMR5RLL        DATA 0xd2
0000            261   _UART0PCF       DATA 0xd9
0000            262   _UART1FCN0      DATA 0x9d
0000            263   _UART1FCN1      DATA 0xd8
0000            264   _UART1FCT       DATA 0xfa
0000            265   _UART1LIN       DATA 0x9e
0000            266   _UART1PCF       DATA 0xda
0000            267   _VDM0CN         DATA 0xff
0000            268   _WDTCN          DATA 0x97
0000            269   _XBR0           DATA 0xe1
0000            270   _XBR1           DATA 0xe2
0000            271   _XBR2           DATA 0xe3
0000            272   _XOSC0CN        DATA 0x86
0000            273   _DPTR           DATA 0x8382
0000            274   _TMR2RL         DATA 0xcbca
0000            275   _TMR3RL         DATA 0x9392
0000            276   _TMR4RL         DATA 0xa3a2
0000            277   _TMR5RL         DATA 0xd3d2
0000            278   _TMR0           DATA 0x8c8a
0000            279   _TMR1           DATA 0x8d8b
0000            280   _TMR2           DATA 0xcfce
0000            281   _TMR3           DATA 0x9594
0000            282   _TMR4           DATA 0xa5a4
0000            283   _TMR5           DATA 0xd5d4
0000            284   _SBRL1          DATA 0x9695
0000            285   _PCA0           DATA 0xfaf9
0000            286   _PCA0CP0        DATA 0xfcfb
0000            287   _PCA0CP1        DATA 0xeae9
0000            288   _PCA0CP2        DATA 0xeceb
0000            289   _PCA0CP3        DATA 0xf5f4
0000            290   _PCA0CP4        DATA 0x8584
0000            291   _PCA0CP5        DATA 0xdedd
0000            292   _ADC0ASA        DATA 0xb6b5
0000            293   _ADC0GT         DATA 0xc4c3
0000            294   _ADC0           DATA 0xbebd
0000            295   _ADC0LT         DATA 0xc6c5
0000            296   _DAC0           DATA 0x8584
0000            297   _DAC1           DATA 0x8a89
0000            298   _DAC2           DATA 0x8c8b
0000            299   _DAC3           DATA 0x8e8d
0000            300   ;--------------------------------------------------------
0000            301   ; special function bits
0000            302   ;--------------------------------------------------------
0000            303   _ACC_0          BIT 0xe0
0000            304   _ACC_1          BIT 0xe1
0000            305   _ACC_2          BIT 0xe2
0000            306   _ACC_3          BIT 0xe3
0000            307   _ACC_4          BIT 0xe4
0000            308   _ACC_5          BIT 0xe5
0000            309   _ACC_6          BIT 0xe6
0000            310   _ACC_7          BIT 0xe7
0000            311   _TEMPE          BIT 0xe8
0000            312   _ADGN0          BIT 0xe9
0000            313   _ADGN1          BIT 0xea
0000            314   _ADWINT         BIT 0xeb
0000            315   _ADBUSY         BIT 0xec
0000            316   _ADINT          BIT 0xed
0000            317   _IPOEN          BIT 0xee
0000            318   _ADEN           BIT 0xef
0000            319   _B_0            BIT 0xf0
0000            320   _B_1            BIT 0xf1
0000            321   _B_2            BIT 0xf2
0000            322   _B_3            BIT 0xf3
0000            323   _B_4            BIT 0xf4
0000            324   _B_5            BIT 0xf5
0000            325   _B_6            BIT 0xf6
0000            326   _B_7            BIT 0xf7
0000            327   _C0FIF          BIT 0xe8
0000            328   _C0RIF          BIT 0xe9
0000            329   _C1FIF          BIT 0xea
0000            330   _C1RIF          BIT 0xeb
0000            331   _C2FIF          BIT 0xec
0000            332   _C2RIF          BIT 0xed
0000            333   _C3FIF          BIT 0xee
0000            334   _C3RIF          BIT 0xef
0000            335   _D1SRC0         BIT 0x88
0000            336   _D1SRC1         BIT 0x89
0000            337   _D1AMEN         BIT 0x8a
0000            338   _D01REFSL       BIT 0x8b
0000            339   _D3SRC0         BIT 0x8c
0000            340   _D3SRC1         BIT 0x8d
0000            341   _D3AMEN         BIT 0x8e
0000            342   _D23REFSL       BIT 0x8f
0000            343   _D0UDIS         BIT 0x98
0000            344   _D1UDIS         BIT 0x99
0000            345   _D2UDIS         BIT 0x9a
0000            346   _D3UDIS         BIT 0x9b
0000            347   _EX0            BIT 0xa8
0000            348   _ET0            BIT 0xa9
0000            349   _EX1            BIT 0xaa
0000            350   _ET1            BIT 0xab
0000            351   _ES0            BIT 0xac
0000            352   _ET2            BIT 0xad
0000            353   _ESPI0          BIT 0xae
0000            354   _EA             BIT 0xaf
0000            355   _PX0            BIT 0xb8
0000            356   _PT0            BIT 0xb9
0000            357   _PX1            BIT 0xba
0000            358   _PT1            BIT 0xbb
0000            359   _PS0            BIT 0xbc
0000            360   _PT2            BIT 0xbd
0000            361   _PSPI0          BIT 0xbe
0000            362   _P0_0           BIT 0x80
0000            363   _P0_1           BIT 0x81
0000            364   _P0_2           BIT 0x82
0000            365   _P0_3           BIT 0x83
0000            366   _P0_4           BIT 0x84
0000            367   _P0_5           BIT 0x85
0000            368   _P0_6           BIT 0x86
0000            369   _P0_7           BIT 0x87
0000            370   _P1_0           BIT 0x90
0000            371   _P1_1           BIT 0x91
0000            372   _P1_2           BIT 0x92
0000            373   _P1_3           BIT 0x93
0000            374   _P1_4           BIT 0x94
0000            375   _P1_5           BIT 0x95
0000            376   _P1_6           BIT 0x96
0000            377   _P1_7           BIT 0x97
0000            378   _P2_0           BIT 0xa0
0000            379   _P2_1           BIT 0xa1
0000            380   _P2_2           BIT 0xa2
0000            381   _P2_3           BIT 0xa3
0000            382   _P2_4           BIT 0xa4
0000            383   _P2_5           BIT 0xa5
0000            384   _P2_6           BIT 0xa6
0000            385   _P3_0           BIT 0xb0
0000            386   _P3_1           BIT 0xb1
0000            387   _P3_2           BIT 0xb2
0000            388   _P3_3           BIT 0xb3
0000            389   _P3_4           BIT 0xb4
0000            390   _P3_7           BIT 0xb7
0000            391   _CCF0           BIT 0xd8
0000            392   _CCF1           BIT 0xd9
0000            393   _CCF2           BIT 0xda
0000            394   _CCF3           BIT 0xdb
0000            395   _CCF4           BIT 0xdc
0000            396   _CCF5           BIT 0xdd
0000            397   _CR             BIT 0xde
0000            398   _CF             BIT 0xdf
0000            399   _PARITY         BIT 0xd0
0000            400   _F1             BIT 0xd1
0000            401   _OV             BIT 0xd2
0000            402   _RS0            BIT 0xd3
0000            403   _RS1            BIT 0xd4
0000            404   _F0             BIT 0xd5
0000            405   _AC             BIT 0xd6
0000            406   _CY             BIT 0xd7
0000            407   _RI             BIT 0x98
0000            408   _TI             BIT 0x99
0000            409   _RB8            BIT 0x9a
0000            410   _TB8            BIT 0x9b
0000            411   _REN            BIT 0x9c
0000            412   _CE             BIT 0x9d
0000            413   _SMODE          BIT 0x9e
0000            414   _RI1            BIT 0xc8
0000            415   _TI1            BIT 0xc9
0000            416   _RBX1           BIT 0xca
0000            417   _TBX1           BIT 0xcb
0000            418   _REN1           BIT 0xcc
0000            419   _PERR1          BIT 0xcd
0000            420   _OVR1           BIT 0xce
0000            421   _SI             BIT 0xc0
0000            422   _ACK            BIT 0xc1
0000            423   _ARBLOST        BIT 0xc2
0000            424   _ACKRQ          BIT 0xc3
0000            425   _STO            BIT 0xc4
0000            426   _STA            BIT 0xc5
0000            427   _TXMODE         BIT 0xc6
0000            428   _MASTER         BIT 0xc7
0000            429   _SPIEN          BIT 0xf8
0000            430   _TXNF           BIT 0xf9
0000            431   _NSSMD0         BIT 0xfa
0000            432   _NSSMD1         BIT 0xfb
0000            433   _RXOVRN         BIT 0xfc
0000            434   _MODF           BIT 0xfd
0000            435   _WCOL           BIT 0xfe
0000            436   _SPIF           BIT 0xff
0000            437   _IT0            BIT 0x88
0000            438   _IE0            BIT 0x89
0000            439   _IT1            BIT 0x8a
0000            440   _IE1            BIT 0x8b
0000            441   _TR0            BIT 0x8c
0000            442   _TF0            BIT 0x8d
0000            443   _TR1            BIT 0x8e
0000            444   _TF1            BIT 0x8f
0000            445   _T2XCLK0        BIT 0xc8
0000            446   _T2XCLK1        BIT 0xc9
0000            447   _TR2            BIT 0xca
0000            448   _T2SPLIT        BIT 0xcb
0000            449   _TF2CEN         BIT 0xcc
0000            450   _TF2LEN         BIT 0xcd
0000            451   _TF2L           BIT 0xce
0000            452   _TF2H           BIT 0xcf
0000            453   _T4XCLK0        BIT 0x98
0000            454   _T4XCLK1        BIT 0x99
0000            455   _TR4            BIT 0x9a
0000            456   _T4SPLIT        BIT 0x9b
0000            457   _TF4CEN         BIT 0x9c
0000            458   _TF4LEN         BIT 0x9d
0000            459   _TF4L           BIT 0x9e
0000            460   _TF4H           BIT 0x9f
0000            461   _T5XCLK0        BIT 0xc0
0000            462   _T5XCLK1        BIT 0xc1
0000            463   _TR5            BIT 0xc2
0000            464   _T5SPLIT        BIT 0xc3
0000            465   _TF5CEN         BIT 0xc4
0000            466   _TF5LEN         BIT 0xc5
0000            467   _TF5L           BIT 0xc6
0000            468   _TF5H           BIT 0xc7
0000            469   _RIE            BIT 0xd8
0000            470   _RXTO0          BIT 0xd9
0000            471   _RXTO1          BIT 0xda
0000            472   _RFRQ           BIT 0xdb
0000            473   _TIE            BIT 0xdc
0000            474   _TXHOLD         BIT 0xdd
0000            475   _TXNF1          BIT 0xde
0000            476   _TFRQ           BIT 0xdf
0000            477   ;--------------------------------------------------------
0000            478   ; overlayable register banks
0000            479   ;--------------------------------------------------------
0000            480            rbank0 segment data overlay
0000            481   ;--------------------------------------------------------
0000            482   ; internal ram data
0000            483   ;--------------------------------------------------------
0000            484            rseg R_DSEG
0000            485   _pwm_reload:
0000            486            ds 2
0002            487   _pwm_motor_reload:
0002            488            ds 2
0004            489   _pwm_state:
0004            490            ds 1
0005            491   _pwm_state1:
0005            492            ds 1
0006            493   _count20ms:
0006            494            ds 1
0007            495   _main_engine_Dcycle_1_56:
0007            496            ds 4
000B            497   ;--------------------------------------------------------
000B            498   ; overlayable items in internal ram 
000B            499   ;--------------------------------------------------------
0000            500            rseg    R_OSEG
0000            501   ;--------------------------------------------------------
0000            502   ; indirectly addressable internal ram data
0000            503   ;--------------------------------------------------------
0000            504            rseg R_ISEG
0000            505   ;--------------------------------------------------------
0000            506   ; absolute internal ram data
0000            507   ;--------------------------------------------------------
0000            508            DSEG
0000            509   ;--------------------------------------------------------
0000            510   ; bit data
0000            511   ;--------------------------------------------------------
0000            512            rseg R_BSEG
0000            513   ;--------------------------------------------------------
0000            514   ; paged external ram data
0000            515   ;--------------------------------------------------------
0000            516            rseg R_PSEG
0000            517   ;--------------------------------------------------------
0000            518   ; external ram data
0000            519   ;--------------------------------------------------------
0000            520            rseg R_XSEG
0000            521   ;--------------------------------------------------------
0000            522   ; absolute external ram data
0000            523   ;--------------------------------------------------------
0000            524            XSEG
0000            525   ;--------------------------------------------------------
0000            526   ; external initialized ram data
0000            527   ;--------------------------------------------------------
0000            528            rseg R_IXSEG
0000            529            rseg R_HOME
0000            530            rseg R_GSINIT
0000            531            rseg R_CSEG
0000            532   ;--------------------------------------------------------
0000            533   ; Reset entry point and interrupt vectors
0000            534   ;--------------------------------------------------------
0000            535            CSEG at 0x0000
0000 020000     536            ljmp    _crt0
008B            537            CSEG at 0x008b
008B 020000     538            ljmp    _Timer4_ISR
0093            539            CSEG at 0x0093
0093 020000     540            ljmp    _Timer5_ISR
0096            541   ;--------------------------------------------------------
0096            542   ; global & static initialisations
0096            543   ;--------------------------------------------------------
0000            544            rseg R_HOME
0000            545            rseg R_GSINIT
0000            546            rseg R_GSINIT
0000            547   ;--------------------------------------------------------
0000            548   ; data variables initialization
0000            549   ;--------------------------------------------------------
0000            550            rseg R_DINIT
0000            551   ;        EFM8_JDY41_Throttle.c:13: volatile unsigned char pwm_state=0;
0000 756000     552            mov     _pwm_state,#0x00
0003            553   ;        EFM8_JDY41_Throttle.c:14: volatile unsigned char pwm_state1=0;
0003 752000     554            mov     _pwm_state1,#0x00
0006            555            ; The linker places a 'ret' at the end of segment R_DINIT.
0006            556   ;--------------------------------------------------------
0006            557   ; code
0006            558   ;--------------------------------------------------------
0000            559            rseg R_CSEG
0000            560   ;------------------------------------------------------------
0000            561   ;Allocation info for local variables in function '_c51_external_startup'
0000            562   ;------------------------------------------------------------
0000            563   ;------------------------------------------------------------
0000            564   ;        EFM8_JDY41_Throttle.c:25: char _c51_external_startup (void)
0000            565   ;        -----------------------------------------
0000            566   ;         function _c51_external_startup
0000            567   ;        -----------------------------------------
0000            568   __c51_external_startup:
0000            569            using   0
0000            570   ;        EFM8_JDY41_Throttle.c:28: SFRPAGE = 0x00;
0000 75A700     571            mov     _SFRPAGE,#0x00
0003            572   ;        EFM8_JDY41_Throttle.c:29: WDTCN = 0xDE; //First key
0003 7597DE     573            mov     _WDTCN,#0xDE
0006            574   ;        EFM8_JDY41_Throttle.c:30: WDTCN = 0xAD; //Second key
0006 7597AD     575            mov     _WDTCN,#0xAD
0009            576   ;        EFM8_JDY41_Throttle.c:32: VDM0CN |= 0x80;
0009 43FF80     577            orl     _VDM0CN,#0x80
000C            578   ;        EFM8_JDY41_Throttle.c:33: RSTSRC = 0x02;
000C 75EF02     579            mov     _RSTSRC,#0x02
000F            580   ;        EFM8_JDY41_Throttle.c:40: SFRPAGE = 0x10;
000F 75A710     581            mov     _SFRPAGE,#0x10
0012            582   ;        EFM8_JDY41_Throttle.c:41: PFE0CN  = 0x20; // SYSCLK < 75 MHz.
0012 75C120     583            mov     _PFE0CN,#0x20
0015            584   ;        EFM8_JDY41_Throttle.c:42: SFRPAGE = 0x00;
0015 75A700     585            mov     _SFRPAGE,#0x00
0018            586   ;        EFM8_JDY41_Throttle.c:63: CLKSEL = 0x00;
0018 75A900     587            mov     _CLKSEL,#0x00
001B            588   ;        EFM8_JDY41_Throttle.c:64: CLKSEL = 0x00;
001B 75A900     589            mov     _CLKSEL,#0x00
001E            590   ;        EFM8_JDY41_Throttle.c:65: while ((CLKSEL & 0x80) == 0);
001E            591   L002001?:
001E E5A9       592            mov     a,_CLKSEL
0020 30E790     593            jnb     acc.7,L002001?
0023            594   ;        EFM8_JDY41_Throttle.c:66: CLKSEL = 0x03;
0023 75A903     595            mov     _CLKSEL,#0x03
0026            596   ;        EFM8_JDY41_Throttle.c:67: CLKSEL = 0x03;
0026 75A903     597            mov     _CLKSEL,#0x03
0029            598   ;        EFM8_JDY41_Throttle.c:68: while ((CLKSEL & 0x80) == 0);
0029            599   L002004?:
0029 E5A9       600            mov     a,_CLKSEL
002B 30E710     601            jnb     acc.7,L002004?
002E            602   ;        EFM8_JDY41_Throttle.c:74: P2MDOUT|=0b_0000_0011;
002E 43A603     603            orl     _P2MDOUT,#0x03
0031            604   ;        EFM8_JDY41_Throttle.c:75: P0MDOUT |= 0x10; // Enable UART0 TX as push-pull output
0031 43A410     605            orl     _P0MDOUT,#0x10
0034            606   ;        EFM8_JDY41_Throttle.c:76: XBR0     = 0x01; // Enable UART0 on P0.4(TX) and P0.5(RX)                     
0034 75E101     607            mov     _XBR0,#0x01
0037            608   ;        EFM8_JDY41_Throttle.c:77: XBR1     = 0X10; // Enable T0 on P0.0
0037 75E210     609            mov     _XBR1,#0x10
003A            610   ;        EFM8_JDY41_Throttle.c:78: XBR2     = 0x40; // Enable crossbar and weak pull-ups
003A 75E340     611            mov     _XBR2,#0x40
003D            612   ;        EFM8_JDY41_Throttle.c:84: SCON0 = 0x10;
003D 759810     613            mov     _SCON0,#0x10
0040            614   ;        EFM8_JDY41_Throttle.c:85: CKCON0 |= 0b_0000_0000 ; // Timer 1 uses the system clock divided by 12.
0040 858E8E     615            mov     _CKCON0,_CKCON0
0043            616   ;        EFM8_JDY41_Throttle.c:86: TH1 = 0x100-((SYSCLK/BAUDRATE)/(2L*12L));
0043 758DE6     617            mov     _TH1,#0xE6
0046            618   ;        EFM8_JDY41_Throttle.c:87: TL1 = TH1;      // Init Timer1
0046 858D8B     619            mov     _TL1,_TH1
0049            620   ;        EFM8_JDY41_Throttle.c:88: TMOD &= ~0xf0;  // TMOD: timer 1 in 8-bit auto-reload
0049 53890F     621            anl     _TMOD,#0x0F
004C            622   ;        EFM8_JDY41_Throttle.c:89: TMOD |=  0x20;                       
004C 438920     623            orl     _TMOD,#0x20
004F            624   ;        EFM8_JDY41_Throttle.c:90: TR1 = 1; // START Timer1
004F D28E       625            setb    _TR1
0051            626   ;        EFM8_JDY41_Throttle.c:91: TI = 1;  // Indicate TX0 ready
0051 D299       627            setb    _TI
0053            628   ;        EFM8_JDY41_Throttle.c:94: SFRPAGE=0x10;
0053 75A710     629            mov     _SFRPAGE,#0x10
0056            630   ;        EFM8_JDY41_Throttle.c:95: TMR4CN0=0x00;   // Stop Timer4; Clear TF4; WARNING: lives in SFR page 0x10
0056 759800     631            mov     _TMR4CN0,#0x00
0059            632   ;        EFM8_JDY41_Throttle.c:98: pwm_motor_reload=0x10000L-(SYSCLK*1.0e-3)/12.0;
0059 75B090     633            mov     _pwm_motor_reload,#0x90
005C 75B1E8     634            mov     (_pwm_motor_reload + 1),#0xE8
005F            635   ;        EFM8_JDY41_Throttle.c:99: TMR4=0xffff;   // Set to reload immediately
005F 75A4FF     636            mov     _TMR4,#0xFF
0062 75A5FF     637            mov     (_TMR4 >> 8),#0xFF
0065            638   ;        EFM8_JDY41_Throttle.c:100: EIE2|=0b_0000_0100;     // Enable Timer4 interrupts
0065 43F304     639            orl     _EIE2,#0x04
0068            640   ;        EFM8_JDY41_Throttle.c:101: TR4=1;
0068 D29A       641            setb    _TR4
006A            642   ;        EFM8_JDY41_Throttle.c:104: SFRPAGE=0x10;
006A 75A710     643            mov     _SFRPAGE,#0x10
006D            644   ;        EFM8_JDY41_Throttle.c:105: TMR5CN0=0x00;
006D 75C000     645            mov     _TMR5CN0,#0x00
0070            646   ;        EFM8_JDY41_Throttle.c:106: pwm_reload=0x10000L-(SYSCLK*1.0e-3)/12.0; // 1.5 miliseconds pulse is the center of the servo
0070 75F090     647            mov     _pwm_reload,#0x90
0073 75F1E8     648            mov     (_pwm_reload + 1),#0xE8
0076            649   ;        EFM8_JDY41_Throttle.c:107: TMR5=0xffff;   // Set to reload immediately
0076 75D4FF     650            mov     _TMR5,#0xFF
0079 75D5FF     651            mov     (_TMR5 >> 8),#0xFF
007C            652   ;        EFM8_JDY41_Throttle.c:108: EIE2|=0b_0000_1000; // Enable Timer5 interrupts
007C 43F308     653            orl     _EIE2,#0x08
007F            654   ;        EFM8_JDY41_Throttle.c:109: TR5=1;         // Start Timer5 (TMR5CN0 is bit addressable)
007F D2C2       655            setb    _TR5
0081            656   ;        EFM8_JDY41_Throttle.c:111: EA=1;
0081 D2AF       657            setb    _EA
0083            658   ;        EFM8_JDY41_Throttle.c:113: SFRPAGE=0x00;
0083 75A700     659            mov     _SFRPAGE,#0x00
0086            660   ;        EFM8_JDY41_Throttle.c:115: return 0;
0086 758200     661            mov     dpl,#0x00
0089 22         662            ret
008A            663   ;------------------------------------------------------------
008A            664   ;Allocation info for local variables in function 'Timer3us'
008A            665   ;------------------------------------------------------------
008A            666   ;us                        Allocated to registers r2 
008A            667   ;i                         Allocated to registers r3 
008A            668   ;------------------------------------------------------------
008A            669   ;        EFM8_JDY41_Throttle.c:119: void Timer3us(unsigned char us)
008A            670   ;        -----------------------------------------
008A            671   ;         function Timer3us
008A            672   ;        -----------------------------------------
008A            673   _Timer3us:
008A AA82       674            mov     r2,dpl
008C            675   ;        EFM8_JDY41_Throttle.c:124: CKCON0|=0b_0100_0000;
008C 438E40     676            orl     _CKCON0,#0x40
008F            677   ;        EFM8_JDY41_Throttle.c:126: TMR3RL = (-(SYSCLK)/1000000L); // Set Timer3 to overflow in 1us.
008F 7592B8     678            mov     _TMR3RL,#0xB8
0092 7593FF     679            mov     (_TMR3RL >> 8),#0xFF
0095            680   ;        EFM8_JDY41_Throttle.c:127: TMR3 = TMR3RL;                 // Initialize Timer3 for first overflow
0095 859294     681            mov     _TMR3,_TMR3RL
0098 859395     682            mov     (_TMR3 >> 8),(_TMR3RL >> 8)
009B            683   ;        EFM8_JDY41_Throttle.c:129: TMR3CN0 = 0x04;                 // Sart Timer3 and clear overflow flag
009B 759104     684            mov     _TMR3CN0,#0x04
009E            685   ;        EFM8_JDY41_Throttle.c:130: for (i = 0; i < us; i++)       // Count <us> overflows
009E 7B00       686            mov     r3,#0x00
00A0            687   L003004?:
00A0 C3         688            clr     c
00A1 EB         689            mov     a,r3
00A2 9A         690            subb    a,r2
00A3 5000       691            jnc     L003007?
00A5            692   ;        EFM8_JDY41_Throttle.c:132: while (!(TMR3CN0 & 0x80));  // Wait for overflow
00A5            693   L003001?:
00A5 E591       694            mov     a,_TMR3CN0
00A7 30E710     695            jnb     acc.7,L003001?
00AA            696   ;        EFM8_JDY41_Throttle.c:133: TMR3CN0 &= ~(0x80);         // Clear overflow indicator
00AA 53917F     697            anl     _TMR3CN0,#0x7F
00AD            698   ;        EFM8_JDY41_Throttle.c:130: for (i = 0; i < us; i++)       // Count <us> overflows
00AD 0B         699            inc     r3
00AE 8000       700            sjmp    L003004?
00B0            701   L003007?:
00B0            702   ;        EFM8_JDY41_Throttle.c:135: TMR3CN0 = 0 ;                   // Stop Timer3 and clear overflow flag
00B0 759100     703            mov     _TMR3CN0,#0x00
00B3 22         704            ret
00B4            705   ;------------------------------------------------------------
00B4            706   ;Allocation info for local variables in function 'waitms'
00B4            707   ;------------------------------------------------------------
00B4            708   ;ms                        Allocated to registers r2 r3 
00B4            709   ;j                         Allocated to registers r4 r5 
00B4            710   ;k                         Allocated to registers r6 
00B4            711   ;------------------------------------------------------------
00B4            712   ;        EFM8_JDY41_Throttle.c:138: void waitms (unsigned int ms)
00B4            713   ;        -----------------------------------------
00B4            714   ;         function waitms
00B4            715   ;        -----------------------------------------
00B4            716   _waitms:
00B4 AA82       717            mov     r2,dpl
00B6 AB83       718            mov     r3,dph
00B8            719   ;        EFM8_JDY41_Throttle.c:142: for(j=0; j<ms; j++)
00B8 7C00       720            mov     r4,#0x00
00BA 7D00       721            mov     r5,#0x00
00BC            722   L004005?:
00BC C3         723            clr     c
00BD EC         724            mov     a,r4
00BE 9A         725            subb    a,r2
00BF ED         726            mov     a,r5
00C0 9B         727            subb    a,r3
00C1 5000       728            jnc     L004009?
00C3            729   ;        EFM8_JDY41_Throttle.c:143: for (k=0; k<4; k++) Timer3us(250);
00C3 7E00       730            mov     r6,#0x00
00C5            731   L004001?:
00C5 BE0450     732            cjne    r6,#0x04,L004018?
00C8            733   L004018?:
00C8 5000       734            jnc     L004007?
00CA 7582FA     735            mov     dpl,#0xFA
00CD C002       736            push    ar2
00CF C003       737            push    ar3
00D1 C004       738            push    ar4
00D3 C005       739            push    ar5
00D5 C006       740            push    ar6
00D7 120000     741            lcall   _Timer3us
00DA D006       742            pop     ar6
00DC D005       743            pop     ar5
00DE D004       744            pop     ar4
00E0 D003       745            pop     ar3
00E2 D002       746            pop     ar2
00E4 0E         747            inc     r6
00E5 8000       748            sjmp    L004001?
00E7            749   L004007?:
00E7            750   ;        EFM8_JDY41_Throttle.c:142: for(j=0; j<ms; j++)
00E7 0C         751            inc     r4
00E8 BC0090     752            cjne    r4,#0x00,L004005?
00EB 0D         753            inc     r5
00EC 8000       754            sjmp    L004005?
00EE            755   L004009?:
00EE 22         756            ret
00EF            757   ;------------------------------------------------------------
00EF            758   ;Allocation info for local variables in function 'Timer4_ISR'
00EF            759   ;------------------------------------------------------------
00EF            760   ;------------------------------------------------------------
00EF            761   ;        EFM8_JDY41_Throttle.c:146: void Timer4_ISR (void) interrupt INTERRUPT_TIMER4
00EF            762   ;        -----------------------------------------
00EF            763   ;         function Timer4_ISR
00EF            764   ;        -----------------------------------------
00EF            765   _Timer4_ISR:
00EF C0E0       766            push    acc
00F1 C002       767            push    ar2
00F3 C003       768            push    ar3
00F5 C004       769            push    ar4
00F7 C005       770            push    ar5
00F9 C0D0       771            push    psw
00FB 75D000     772            mov     psw,#0x00
00FE            773   ;        EFM8_JDY41_Throttle.c:148: SFRPAGE=0x10;
00FE 75A710     774            mov     _SFRPAGE,#0x10
0101            775   ;        EFM8_JDY41_Throttle.c:149: TF4H = 0; // Clear Timer4 interrupt flag
0101 C29F       776            clr     _TF4H
0103            777   ;        EFM8_JDY41_Throttle.c:151: switch (pwm_state1)
0103 AA20       778            mov     r2,_pwm_state1
0105 BA0010     779            cjne    r2,#0x00,L005009?
0108 8000       780            sjmp    L005001?
010A            781   L005009?:
010A            782   ;        EFM8_JDY41_Throttle.c:153: case 0:
010A BA0190     783            cjne    r2,#0x01,L005003?
010D 8000       784            sjmp    L005002?
010F            785   L005001?:
010F            786   ;        EFM8_JDY41_Throttle.c:154: ESCOUT=1;
010F D297       787            setb    _P1_7
0111            788   ;        EFM8_JDY41_Throttle.c:155: TMR4RL=RELOAD_10MS;
0111 75A2A0     789            mov     _TMR4RL,#0xA0
0114 75A315     790            mov     (_TMR4RL >> 8),#0x15
0117            791   ;        EFM8_JDY41_Throttle.c:156: pwm_state1=1;
0117 752001     792            mov     _pwm_state1,#0x01
011A            793   ;        EFM8_JDY41_Throttle.c:157: count20ms++;
011A 05E0       794            inc     _count20ms
011C            795   ;        EFM8_JDY41_Throttle.c:158: break;
011C            796   ;        EFM8_JDY41_Throttle.c:159: case 1:
011C 8000       797            sjmp    L005005?
011E            798   L005002?:
011E            799   ;        EFM8_JDY41_Throttle.c:160: ESCOUT=0;
011E C297       800            clr     _P1_7
0120            801   ;        EFM8_JDY41_Throttle.c:161: TMR4RL=RELOAD_10MS-pwm_motor_reload;
0120 AAB0       802            mov     r2,_pwm_motor_reload
0122 ABB1       803            mov     r3,(_pwm_motor_reload + 1)
0124 E4         804            clr     a
0125 FC         805            mov     r4,a
0126 FD         806            mov     r5,a
0127 74A0       807            mov     a,#0xA0
0129 C3         808            clr     c
012A 9A         809            subb    a,r2
012B FA         810            mov     r2,a
012C 7415       811            mov     a,#0x15
012E 9B         812            subb    a,r3
012F FB         813            mov     r3,a
0130 E4         814            clr     a
0131 9C         815            subb    a,r4
0132 FC         816            mov     r4,a
0133 E4         817            clr     a
0134 9D         818            subb    a,r5
0135 FD         819            mov     r5,a
0136 8AA2       820            mov     _TMR4RL,r2
0138 8BA3       821            mov     (_TMR4RL >> 8),r3
013A            822   ;        EFM8_JDY41_Throttle.c:162: pwm_state1=2;
013A 752002     823            mov     _pwm_state1,#0x02
013D            824   ;        EFM8_JDY41_Throttle.c:163: break;
013D            825   ;        EFM8_JDY41_Throttle.c:164: default:
013D 8000       826            sjmp    L005005?
013F            827   L005003?:
013F            828   ;        EFM8_JDY41_Throttle.c:165: ESCOUT=0;
013F C297       829            clr     _P1_7
0141            830   ;        EFM8_JDY41_Throttle.c:166: TMR4RL=pwm_motor_reload;
0141 85B0A2     831            mov     _TMR4RL,_pwm_motor_reload
0144 85B1A3     832            mov     (_TMR4RL >> 8),(_pwm_motor_reload + 1)
0147            833   ;        EFM8_JDY41_Throttle.c:167: pwm_state1=0;
0147 752000     834            mov     _pwm_state1,#0x00
014A            835   ;        EFM8_JDY41_Throttle.c:169: }
014A            836   L005005?:
014A D0D0       837            pop     psw
014C D005       838            pop     ar5
014E D004       839            pop     ar4
0150 D003       840            pop     ar3
0152 D002       841            pop     ar2
0154 D0E0       842            pop     acc
0156 32         843            reti
0157            844   ;        eliminated unneeded push/pop dpl
0157            845   ;        eliminated unneeded push/pop dph
0157            846   ;        eliminated unneeded push/pop b
0157            847   ;------------------------------------------------------------
0157            848   ;Allocation info for local variables in function 'Timer5_ISR'
0157            849   ;------------------------------------------------------------
0157            850   ;------------------------------------------------------------
0157            851   ;        EFM8_JDY41_Throttle.c:172: void Timer5_ISR (void) interrupt INTERRUPT_TIMER5
0157            852   ;        -----------------------------------------
0157            853   ;         function Timer5_ISR
0157            854   ;        -----------------------------------------
0157            855   _Timer5_ISR:
0157 C0E0       856            push    acc
0159 C002       857            push    ar2
015B C003       858            push    ar3
015D C004       859            push    ar4
015F C005       860            push    ar5
0161 C0D0       861            push    psw
0163 75D000     862            mov     psw,#0x00
0166            863   ;        EFM8_JDY41_Throttle.c:174: SFRPAGE=0x10;
0166 75A710     864            mov     _SFRPAGE,#0x10
0169            865   ;        EFM8_JDY41_Throttle.c:175: TF5H = 0; // Clear Timer5 interrupt flag
0169 C2C7       866            clr     _TF5H
016B            867   ;        EFM8_JDY41_Throttle.c:179: switch (pwm_state)
016B AA60       868            mov     r2,_pwm_state
016D BA0050     869            cjne    r2,#0x00,L006009?
0170 8000       870            sjmp    L006001?
0172            871   L006009?:
0172            872   ;        EFM8_JDY41_Throttle.c:181: case 0:
0172 BA01D0     873            cjne    r2,#0x01,L006003?
0175 8000       874            sjmp    L006002?
0177            875   L006001?:
0177            876   ;        EFM8_JDY41_Throttle.c:182: PWMOUT=1;
0177 D2A0       877            setb    _P2_0
0179            878   ;        EFM8_JDY41_Throttle.c:183: TMR5RL=RELOAD_10MS;
0179 75D2A0     879            mov     _TMR5RL,#0xA0
017C 75D315     880            mov     (_TMR5RL >> 8),#0x15
017F            881   ;        EFM8_JDY41_Throttle.c:184: pwm_state=1;
017F 756001     882            mov     _pwm_state,#0x01
0182            883   ;        EFM8_JDY41_Throttle.c:185: count20ms++;
0182 05E0       884            inc     _count20ms
0184            885   ;        EFM8_JDY41_Throttle.c:186: break;
0184            886   ;        EFM8_JDY41_Throttle.c:187: case 1:
0184 8000       887            sjmp    L006005?
0186            888   L006002?:
0186            889   ;        EFM8_JDY41_Throttle.c:188: PWMOUT=0;
0186 C2A0       890            clr     _P2_0
0188            891   ;        EFM8_JDY41_Throttle.c:189: TMR5RL=RELOAD_10MS-pwm_reload;
0188 AAF0       892            mov     r2,_pwm_reload
018A ABF1       893            mov     r3,(_pwm_reload + 1)
018C E4         894            clr     a
018D FC         895            mov     r4,a
018E FD         896            mov     r5,a
018F 74A0       897            mov     a,#0xA0
0191 C3         898            clr     c
0192 9A         899            subb    a,r2
0193 FA         900            mov     r2,a
0194 7415       901            mov     a,#0x15
0196 9B         902            subb    a,r3
0197 FB         903            mov     r3,a
0198 E4         904            clr     a
0199 9C         905            subb    a,r4
019A FC         906            mov     r4,a
019B E4         907            clr     a
019C 9D         908            subb    a,r5
019D FD         909            mov     r5,a
019E 8AD2       910            mov     _TMR5RL,r2
01A0 8BD3       911            mov     (_TMR5RL >> 8),r3
01A2            912   ;        EFM8_JDY41_Throttle.c:190: pwm_state=2;
01A2 756002     913            mov     _pwm_state,#0x02
01A5            914   ;        EFM8_JDY41_Throttle.c:191: break;
01A5            915   ;        EFM8_JDY41_Throttle.c:192: default:
01A5 8000       916            sjmp    L006005?
01A7            917   L006003?:
01A7            918   ;        EFM8_JDY41_Throttle.c:193: PWMOUT=0;
01A7 C2A0       919            clr     _P2_0
01A9            920   ;        EFM8_JDY41_Throttle.c:194: TMR5RL=pwm_reload;
01A9 85F0D2     921            mov     _TMR5RL,_pwm_reload
01AC 85F1D3     922            mov     (_TMR5RL >> 8),(_pwm_reload + 1)
01AF            923   ;        EFM8_JDY41_Throttle.c:195: pwm_state=0;
01AF 756000     924            mov     _pwm_state,#0x00
01B2            925   ;        EFM8_JDY41_Throttle.c:197: }
01B2            926   L006005?:
01B2 D0D0       927            pop     psw
01B4 D005       928            pop     ar5
01B6 D004       929            pop     ar4
01B8 D003       930            pop     ar3
01BA D002       931            pop     ar2
01BC D0E0       932            pop     acc
01BE 32         933            reti
01BF            934   ;        eliminated unneeded push/pop dpl
01BF            935   ;        eliminated unneeded push/pop dph
01BF            936   ;        eliminated unneeded push/pop b
01BF            937   ;------------------------------------------------------------
01BF            938   ;Allocation info for local variables in function 'main'
01BF            939   ;------------------------------------------------------------
01BF            940   ;throttle_level2           Allocated to registers r4 r5 
01BF            941   ;throttle_level1           Allocated to registers r6 r7 
01BF            942   ;throttle_level0           Allocated to registers r0 r1 
01BF            943   ;engine_Dcycle             Allocated with name '_main_engine_Dcycle_1_56'
01BF            944   ;engine_armed              Allocated to registers r2 r3 
01BF            945   ;------------------------------------------------------------
01BF            946   ;        EFM8_JDY41_Throttle.c:200: void main (void)
01BF            947   ;        -----------------------------------------
01BF            948   ;         function main
01BF            949   ;        -----------------------------------------
01BF            950   _main:
01BF            951   ;        EFM8_JDY41_Throttle.c:208: int engine_armed = 0;
01BF 7A00       952            mov     r2,#0x00
01C1 7B00       953            mov     r3,#0x00
01C3            954   ;        EFM8_JDY41_Throttle.c:209: ARMINGOUT = 1;
01C3 D295       955            setb    _P1_5
01C5            956   ;        EFM8_JDY41_Throttle.c:211: count20ms=0; // Count20ms is an atomic variable, so no problem sharing with timer 5 ISR
01C5 75E000     957            mov     _count20ms,#0x00
01C8            958   ;        EFM8_JDY41_Throttle.c:212: while((1000/20)>count20ms); // Wait a second to give PuTTy a chance to start
01C8            959   L007001?:
01C8 74CE       960            mov     a,#0x100 - 0x32
01CA 25E0       961            add     a,_count20ms
01CC 5000       962            jnc     L007001?
01CE            963   ;        EFM8_JDY41_Throttle.c:214: pwm_reload=0x10000L-(SYSCLK*1.0e-3)/12.0;
01CE 75F090     964            mov     _pwm_reload,#0x90
01D1 75F1E8     965            mov     (_pwm_reload + 1),#0xE8
01D4            966   ;        EFM8_JDY41_Throttle.c:215: pwm_motor_reload=0x10000L-(SYSCLK*1.0e-3)/12.0;
01D4 75B090     967            mov     _pwm_motor_reload,#0x90
01D7 75B1E8     968            mov     (_pwm_motor_reload + 1),#0xE8
01DA            969   ;        EFM8_JDY41_Throttle.c:219: while(1)
01DA            970   L007042?:
01DA            971   ;        EFM8_JDY41_Throttle.c:221: if(P3_7 == 1){
01DA 30B710     972            jnb     _P3_7,L007039?
01DD            973   ;        EFM8_JDY41_Throttle.c:223: pwm_reload=0x10000L-(SYSCLK*2.0*1.0e-3)/12.0;
01DD 75F020     974            mov     _pwm_reload,#0x20
01E0 75F1D1     975            mov     (_pwm_reload + 1),#0xD1
01E3            976   ;        EFM8_JDY41_Throttle.c:224: pwm_motor_reload=0x10000L-(SYSCLK*1.0*1.0e-3)/12.0;
01E3 75B090     977            mov     _pwm_motor_reload,#0x90
01E6 75B1E8     978            mov     (_pwm_motor_reload + 1),#0xE8
01E9            979   ;        EFM8_JDY41_Throttle.c:225: engine_armed = 0;
01E9 7A00       980            mov     r2,#0x00
01EB 7B00       981            mov     r3,#0x00
01ED            982   ;        EFM8_JDY41_Throttle.c:226: ARMINGOUT = 1;
01ED D295       983            setb    _P1_5
01EF 020000     984            ljmp    L007040?
01F2            985   L007039?:
01F2            986   ;        EFM8_JDY41_Throttle.c:229: if(P0_4 == 0 && !engine_armed){
01F2 208490     987            jb      _P0_4,L007014?
01F5 EA         988            mov     a,r2
01F6 4B         989            orl     a,r3
01F7 7000       990            jnz     L007014?
01F9            991   ;        EFM8_JDY41_Throttle.c:231: while(P0_4 == 0);
01F9            992   L007004?:
01F9 3084D0     993            jnb     _P0_4,L007004?
01FC            994   ;        EFM8_JDY41_Throttle.c:232: engine_armed = 1;
01FC 7A01       995            mov     r2,#0x01
01FE 7B00       996            mov     r3,#0x00
0200            997   ;        EFM8_JDY41_Throttle.c:233: ARMINGOUT = 0;
0200 C295       998            clr     _P1_5
0202 8000       999            sjmp    L007015?
0204           1000   L007014?:
0204           1001   ;        EFM8_JDY41_Throttle.c:236: }else if(P0_4 == 0 && engine_armed){
0204 208410    1002            jb      _P0_4,L007015?
0207 EA        1003            mov     a,r2
0208 4B        1004            orl     a,r3
0209 6000      1005            jz      L007015?
020B           1006   ;        EFM8_JDY41_Throttle.c:238: while(P0_4 == 0);
020B           1007   L007007?:
020B 308450    1008            jnb     _P0_4,L007007?
020E           1009   ;        EFM8_JDY41_Throttle.c:239: engine_armed = 0;
020E 7A00      1010            mov     r2,#0x00
0210 7B00      1011            mov     r3,#0x00
0212           1012   ;        EFM8_JDY41_Throttle.c:240: ARMINGOUT = 1;
0212 D295      1013            setb    _P1_5
0214           1014   L007015?:
0214           1015   ;        EFM8_JDY41_Throttle.c:245: throttle_level2 = P3_2;
0214 A2B2      1016            mov     c,_P3_2
0216 E4        1017            clr     a
0217 33        1018            rlc     a
0218 FC        1019            mov     r4,a
0219 7D00      1020            mov     r5,#0x00
021B           1021   ;        EFM8_JDY41_Throttle.c:246: throttle_level1 = P3_1;
021B A2B1      1022            mov     c,_P3_1
021D E4        1023            clr     a
021E 33        1024            rlc     a
021F FE        1025            mov     r6,a
0220 7F00      1026            mov     r7,#0x00
0222           1027   ;        EFM8_JDY41_Throttle.c:247: throttle_level0 = P3_0;
0222 A2B0      1028            mov     c,_P3_0
0224 E4        1029            clr     a
0225 33        1030            rlc     a
0226 F8        1031            mov     r0,a
0227 7900      1032            mov     r1,#0x00
0229           1033   ;        EFM8_JDY41_Throttle.c:260: if(throttle_level2){
0229 EC        1034            mov     a,r4
022A 4D        1035            orl     a,r5
022B 6000      1036            jz      L007033?
022D           1037   ;        EFM8_JDY41_Throttle.c:261: if(throttle_level1){
022D EE        1038            mov     a,r6
022E 4F        1039            orl     a,r7
022F 6000      1040            jz      L007021?
0231           1041   ;        EFM8_JDY41_Throttle.c:263: engine_Dcycle = 2.0;
0231 751000    1042            mov     _main_engine_Dcycle_1_56,#0x00
0234 751100    1043            mov     (_main_engine_Dcycle_1_56 + 1),#0x00
0237 751200    1044            mov     (_main_engine_Dcycle_1_56 + 2),#0x00
023A 751340    1045            mov     (_main_engine_Dcycle_1_56 + 3),#0x40
023D 8000      1046            sjmp    L007034?
023F           1047   L007021?:
023F           1048   ;        EFM8_JDY41_Throttle.c:265: if(throttle_level0){
023F E8        1049            mov     a,r0
0240 49        1050            orl     a,r1
0241 6000      1051            jz      L007018?
0243           1052   ;        EFM8_JDY41_Throttle.c:267: engine_Dcycle = 1.8333;
0243 751093    1053            mov     _main_engine_Dcycle_1_56,#0x93
0246 7511A9    1054            mov     (_main_engine_Dcycle_1_56 + 1),#0xA9
0249 7512EA    1055            mov     (_main_engine_Dcycle_1_56 + 2),#0xEA
024C 75133F    1056            mov     (_main_engine_Dcycle_1_56 + 3),#0x3F
024F 8000      1057            sjmp    L007034?
0251           1058   L007018?:
0251           1059   ;        EFM8_JDY41_Throttle.c:270: engine_Dcycle = 1.6667;
0251 75106D    1060            mov     _main_engine_Dcycle_1_56,#0x6D
0254 751156    1061            mov     (_main_engine_Dcycle_1_56 + 1),#0x56
0257 7512D5    1062            mov     (_main_engine_Dcycle_1_56 + 2),#0xD5
025A 75133F    1063            mov     (_main_engine_Dcycle_1_56 + 3),#0x3F
025D 8000      1064            sjmp    L007034?
025F           1065   L007033?:
025F           1066   ;        EFM8_JDY41_Throttle.c:275: if(throttle_level1){
025F EE        1067            mov     a,r6
0260 4F        1068            orl     a,r7
0261 6000      1069            jz      L007030?
0263           1070   ;        EFM8_JDY41_Throttle.c:276: if(throttle_level0){
0263 E8        1071            mov     a,r0
0264 49        1072            orl     a,r1
0265 6000      1073            jz      L007024?
0267           1074   ;        EFM8_JDY41_Throttle.c:278: engine_Dcycle = 1.5;
0267 751000    1075            mov     _main_engine_Dcycle_1_56,#0x00
026A 751100    1076            mov     (_main_engine_Dcycle_1_56 + 1),#0x00
026D 7512C0    1077            mov     (_main_engine_Dcycle_1_56 + 2),#0xC0
0270 75133F    1078            mov     (_main_engine_Dcycle_1_56 + 3),#0x3F
0273 8000      1079            sjmp    L007034?
0275           1080   L007024?:
0275           1081   ;        EFM8_JDY41_Throttle.c:281: engine_Dcycle = 1.3333;
0275 751093    1082            mov     _main_engine_Dcycle_1_56,#0x93
0278 7511A9    1083            mov     (_main_engine_Dcycle_1_56 + 1),#0xA9
027B 7512AA    1084            mov     (_main_engine_Dcycle_1_56 + 2),#0xAA
027E 75133F    1085            mov     (_main_engine_Dcycle_1_56 + 3),#0x3F
0281 8000      1086            sjmp    L007034?
0283           1087   L007030?:
0283           1088   ;        EFM8_JDY41_Throttle.c:285: if(throttle_level0){
0283 E8        1089            mov     a,r0
0284 49        1090            orl     a,r1
0285 6000      1091            jz      L007027?
0287           1092   ;        EFM8_JDY41_Throttle.c:287: engine_Dcycle = 1.1667;
0287 75106D    1093            mov     _main_engine_Dcycle_1_56,#0x6D
028A 751156    1094            mov     (_main_engine_Dcycle_1_56 + 1),#0x56
028D 751295    1095            mov     (_main_engine_Dcycle_1_56 + 2),#0x95
0290 75133F    1096            mov     (_main_engine_Dcycle_1_56 + 3),#0x3F
0293 8000      1097            sjmp    L007034?
0295           1098   L007027?:
0295           1099   ;        EFM8_JDY41_Throttle.c:290: engine_Dcycle = 1.0;
0295 751000    1100            mov     _main_engine_Dcycle_1_56,#0x00
0298 751100    1101            mov     (_main_engine_Dcycle_1_56 + 1),#0x00
029B 751280    1102            mov     (_main_engine_Dcycle_1_56 + 2),#0x80
029E 75133F    1103            mov     (_main_engine_Dcycle_1_56 + 3),#0x3F
02A1           1104   L007034?:
02A1           1105   ;        EFM8_JDY41_Throttle.c:296: if(engine_armed){
02A1 EA        1106            mov     a,r2
02A2 4B        1107            orl     a,r3
02A3 7000      1108            jnz     L007077?
02A5 020000    1109            ljmp    L007036?
02A8           1110   L007077?:
02A8           1111   ;        EFM8_JDY41_Throttle.c:297: pwm_motor_reload=0x10000L-(SYSCLK*engine_Dcycle*1.0e-3)/12.0;
02A8 C002      1112            push    ar2
02AA C003      1113            push    ar3
02AC C010      1114            push    _main_engine_Dcycle_1_56
02AE C011      1115            push    (_main_engine_Dcycle_1_56 + 1)
02B0 C012      1116            push    (_main_engine_Dcycle_1_56 + 2)
02B2 C013      1117            push    (_main_engine_Dcycle_1_56 + 3)
02B4 90A000    1118            mov     dptr,#0xA000
02B7 75F08C    1119            mov     b,#0x8C
02BA 7447      1120            mov     a,#0x47
02BC 120000    1121            lcall   ___fsmul
02BF AC82      1122            mov     r4,dpl
02C1 AD83      1123            mov     r5,dph
02C3 AEF0      1124            mov     r6,b
02C5 FF        1125            mov     r7,a
02C6 E581      1126            mov     a,sp
02C8 24FC      1127            add     a,#0xfc
02CA F581      1128            mov     sp,a
02CC E4        1129            clr     a
02CD C0E0      1130            push    acc
02CF C0E0      1131            push    acc
02D1 7440      1132            mov     a,#0x40
02D3 C0E0      1133            push    acc
02D5 7441      1134            mov     a,#0x41
02D7 C0E0      1135            push    acc
02D9 8C82      1136            mov     dpl,r4
02DB 8D83      1137            mov     dph,r5
02DD 8EF0      1138            mov     b,r6
02DF EF        1139            mov     a,r7
02E0 120000    1140            lcall   ___fsdiv
02E3 AC82      1141            mov     r4,dpl
02E5 AD83      1142            mov     r5,dph
02E7 AEF0      1143            mov     r6,b
02E9 FF        1144            mov     r7,a
02EA E581      1145            mov     a,sp
02EC 24FC      1146            add     a,#0xfc
02EE F581      1147            mov     sp,a
02F0 C004      1148            push    ar4
02F2 C005      1149            push    ar5
02F4 C006      1150            push    ar6
02F6 C007      1151            push    ar7
02F8 900000    1152            mov     dptr,#0x0000
02FB 75F080    1153            mov     b,#0x80
02FE 7447      1154            mov     a,#0x47
0300 120000    1155            lcall   ___fssub
0303 AC82      1156            mov     r4,dpl
0305 AD83      1157            mov     r5,dph
0307 AEF0      1158            mov     r6,b
0309 FF        1159            mov     r7,a
030A E581      1160            mov     a,sp
030C 24FC      1161            add     a,#0xfc
030E F581      1162            mov     sp,a
0310 8C82      1163            mov     dpl,r4
0312 8D83      1164            mov     dph,r5
0314 8EF0      1165            mov     b,r6
0316 EF        1166            mov     a,r7
0317 120000    1167            lcall   ___fs2uint
031A 8582B0    1168            mov     _pwm_motor_reload,dpl
031D 8583B1    1169            mov     (_pwm_motor_reload + 1),dph
0320 D003      1170            pop     ar3
0322 D002      1171            pop     ar2
0324 8000      1172            sjmp    L007037?
0326           1173   L007036?:
0326           1174   ;        EFM8_JDY41_Throttle.c:299: pwm_motor_reload=0x10000L-(SYSCLK*1.0*1.0e-3)/12.0;
0326 75B090    1175            mov     _pwm_motor_reload,#0x90
0329 75B1E8    1176            mov     (_pwm_motor_reload + 1),#0xE8
032C           1177   L007037?:
032C           1178   ;        EFM8_JDY41_Throttle.c:302: pwm_reload=0x10000L-(SYSCLK*1.0e-3)/12.0;
032C 75F090    1179            mov     _pwm_reload,#0x90
032F 75F1E8    1180            mov     (_pwm_reload + 1),#0xE8
0332           1181   L007040?:
0332           1182   ;        EFM8_JDY41_Throttle.c:307: waitms(10);
0332 90000A    1183            mov     dptr,#0x000A
0335 C002      1184            push    ar2
0337 C003      1185            push    ar3
0339 120000    1186            lcall   _waitms
033C D003      1187            pop     ar3
033E D002      1188            pop     ar2
0340 020000    1189            ljmp    L007042?
0343           1190            rseg R_CSEG
0343           1191   
0000           1192            rseg R_XINIT
0000           1193   
0000           1194            rseg R_CONST
0000           1195   
0096           1196            CSEG
0096           1197   
0096           1198   end
